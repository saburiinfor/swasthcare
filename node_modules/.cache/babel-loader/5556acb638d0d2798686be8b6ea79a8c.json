{"ast":null,"code":"import _regeneratorRuntime from\"/Users/lravikiran/SaburiInformatics/swasthcare-project/swasthcare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/lravikiran/SaburiInformatics/swasthcare-project/swasthcare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/lravikiran/SaburiInformatics/swasthcare-project/swasthcare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/lravikiran/SaburiInformatics/swasthcare-project/swasthcare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/lravikiran/SaburiInformatics/swasthcare-project/swasthcare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/lravikiran/SaburiInformatics/swasthcare-project/swasthcare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/lravikiran/SaburiInformatics/swasthcare-project/swasthcare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from\"react-redux\";import*as actions from\"../../store/actions\";import{Redirect}from\"react-router-dom\";import getPageLink from\"../../components/Common/WizardButtons/StageManager\";import{Col,Row}from\"reactstrap\";import{Helmet}from\"react-helmet\";import UserProfile from\"../UserProfile/UserProfile\";import Breadcrumb from\"../../components/Common/Breadcrumb/Breadcrumb\";import WizardButtons from\"../../components/Common/WizardButtons/WizardButtons\";import ImgWithOverlayTextGroup from\"../ImgWithOverlayText/ImgWithOverlayTextGroup\";import'./razorpay.scss';import{loadCheckout}from'@tiltbike/razorpay-checkout-js';var AppointmentPayment=/*#__PURE__*/function(_Component){_inherits(AppointmentPayment,_Component);var _super=_createSuper(AppointmentPayment);function AppointmentPayment(props){var _this;_classCallCheck(this,AppointmentPayment);_this=_super.call(this,props);_this.handlePaymentSubmission=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var options,rzp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();options={\"key\":\"rzp_test_11WWnGxxs9Gky3\",// Test API Key, @TODO would change while pushing to production.\n\"amount\":_this.props.costDetails.amount,\"currency\":_this.props.costDetails.currency,\"name\":\"ConferKare\",\"description\":_this.props.costDetails.description,\"image\":'ConferKare',\"handler\":function handler(response){this.state.paymentResponse.razorpay_payment_id=response.razorpay_payment_id;this.state.paymentResponse.razorpay_order_id=response.razorpay_order_id;this.state.paymentResponse.razorpay_signature=response.razorpay_signature;},\"prefill\":{\"name\":_this.props.costDetails.p_name,\"email\":_this.props.costDetails.p_email},\"theme\":{\"color\":\"#F37254\"}};_context.next=4;return loadCheckout(options);case 4:rzp=_context.sent;rzp.open();case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handlerNextBtnClick=function(){_this.props.appointmentData.paymentResponse=_this.state.paymentResponse;_this.props.onSetAppointmentData(_this.props.appointmentData);};_this.state={paymentResponse:{}};_this.handlePaymentSubmission.bind(_assertThisInitialized(_this));_this.handlerNextBtnClick.bind(_assertThisInitialized(_this));return _this;}_createClass(AppointmentPayment,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.onGetAppointmentCostDetails(this.props.appointmentData);var orderDetails={amount:this.props.costDetails.amount,currency:this.props.costDetails.currency,receipt:'rpay_conferkare_'+this.props.appointmentData.id+'_'+new Date().getTime()};// this.props.onCreateRPayOrderId(orderDetails);\n}},{key:\"render\",value:function render(){if(this.props.userProfile.success===0){sessionStorage.setItem('conferkare.appointment.activeStage',0);return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}var pageUrl=getPageLink();return/*#__PURE__*/React.createElement(Col,{md:\"12\",className:\"mt10\"},/*#__PURE__*/React.createElement(Redirect,{to:pageUrl}),/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"style\",null,'.header .logo h2{color:#333;} .mt10{margin-top:10px;} main{ background: #fff; } .header .search{border:1px solid #ccc} .header{border-bottom:1px solid #666} ')),this.props.profileCompliant===false&&/*#__PURE__*/React.createElement(UserProfile,null),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:\"8\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Appointment payment\"),/*#__PURE__*/React.createElement(Breadcrumb,{activeStep:'6'})),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"div\",{className:'paymentBox'},/*#__PURE__*/React.createElement(\"h4\",null,\"Make payment for appointment\",/*#__PURE__*/React.createElement(WizardButtons,{nextBtnCallback:this.handlerNextBtnClick})),/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"style\",null,'.header .logo h2{color:#333;} .mt10{margin-top:10px;} main{ background: #fff; } .header .search{border:1px solid #ccc} .header{border-bottom:1px solid #666} .header .logo img{height:80px} ')),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"table\",{className:'appointmentTable'},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",{colSpan:'2'},\"Appointment details\"))),/*#__PURE__*/React.createElement(\"tbody\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Appointment description\"),/*#__PURE__*/React.createElement(\"td\",null,this.props.costDetails.description)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Appointment charges\"),/*#__PURE__*/React.createElement(\"td\",null,this.props.costDetails.amount)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Patient name\"),/*#__PURE__*/React.createElement(\"td\",null,this.props.costDetails.p_name)),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,\"Patient email\"),/*#__PURE__*/React.createElement(\"td\",null,this.props.costDetails.p_email)))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:'rzp-button',onClick:this.handlePaymentSubmission.bind(this)},/*#__PURE__*/React.createElement(\"p\",null,\"Pay fees\"))))))))),/*#__PURE__*/React.createElement(Col,{md:\"4\"},/*#__PURE__*/React.createElement(ImgWithOverlayTextGroup,null))));}}]);return AppointmentPayment;}(Component);var mapStateToProps=function mapStateToProps(state){return{userProfile:state.UserProfile.userProfile,profileCompliant:state.UserProfile.userProfile.dateofbirth!=='0000-00-00',appointmentData:state.newAppointment.appointmentData,costDetails:state.appointmentPayment.costDetails,rpayOrder:state.appointmentPayment.rpayOrder};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onCreateRPayOrderId:function onCreateRPayOrderId(orderDetails){return dispatch(actions.createRPayOrderId(orderDetails));},onGetAppointmentCostDetails:function onGetAppointmentCostDetails(appointmentData){return dispatch(actions.getAppointmentCostDetails(appointmentData));},onSetAppointmentData:function onSetAppointmentData(appointmentData){return dispatch(actions.setAppointmentData(appointmentData));}};};export default connect(mapStateToProps,mapDispatchToProps)(AppointmentPayment);","map":null,"metadata":{},"sourceType":"module"}