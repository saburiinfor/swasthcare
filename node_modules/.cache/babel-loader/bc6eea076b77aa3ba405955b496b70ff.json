{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.default = guessSelectedCountry;\n\nvar _cramda = require('cramda');\n\nvar _cramda2 = _interopRequireDefault(_cramda);\n\nvar _countryTelephoneData = require('country-telephone-data');\n\nvar _countryTelephoneData2 = _interopRequireDefault(_countryTelephoneData);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // memoize results based on the first 5/6 characters. That is all that matters\n\n\nvar find = _cramda2.default.find,\n    propEq = _cramda2.default.propEq,\n    startsWith = _cramda2.default.startsWith;\nvar allCountries = _countryTelephoneData2.default.allCountries,\n    allCountryCodes = _countryTelephoneData2.default.allCountryCodes;\n\nfunction guessSelectedCountry(inputNumber, props) {\n  var defaultCountry = props.defaultCountry,\n      onlyCountries = props.onlyCountries;\n  var secondBestGuess = find(propEq('iso2', defaultCountry), allCountries) || onlyCountries[0];\n  var inputNumberForCountries = inputNumber.substr(0, 4);\n  var bestGuess = void 0;\n\n  if (inputNumber.trim() !== '') {\n    bestGuess = onlyCountries.reduce(function (selectedCountry, country) {\n      // if the country dialCode exists WITH area code\n      if (allCountryCodes[inputNumberForCountries] && allCountryCodes[inputNumberForCountries][0] === country.iso2) {\n        return country; // if the selected country dialCode is there with the area code\n      } else if (allCountryCodes[inputNumberForCountries] && allCountryCodes[inputNumberForCountries][0] === selectedCountry.iso2) {\n        return selectedCountry; // else do the original if statement\n      }\n\n      if (startsWith(country.dialCode, inputNumber)) {\n        if (country.dialCode.length > selectedCountry.dialCode.length) {\n          return country;\n        }\n\n        if (country.dialCode.length === selectedCountry.dialCode.length && country.priority < selectedCountry.priority) {\n          return country;\n        }\n      }\n\n      return selectedCountry;\n    }, {\n      dialCode: '',\n      priority: 10001\n    }, this);\n  } else {\n    return secondBestGuess;\n  }\n\n  if (!bestGuess || !bestGuess.name) {\n    return secondBestGuess;\n  }\n\n  return bestGuess;\n}\n\nmodule.exports = exports['default'];","map":null,"metadata":{},"sourceType":"script"}