{"version":3,"file":"checkout.js","sources":["../src/index.js"],"sourcesContent":["const CHECKOUT_URL = 'https://checkout.razorpay.com/v1/checkout.js'\n\nconst injectScript = () => {\n  const script = document.createElement('script')\n  script.src = CHECKOUT_URL\n\n  const headOrBody = document.head || document.body\n\n  if (!headOrBody) {\n    throw new Error(\n      'Expected document.body not to be null. checkout.js requires a <body> element.'\n    )\n  }\n\n  headOrBody.appendChild(script)\n\n  return script\n}\n\n// Execute our own script injection after a tick to give users time to\n// do their own script injection.\nconst checkoutPromise = Promise.resolve().then(() => {\n  if (typeof window === 'undefined') {\n    // Resolve to null when imported server side. This makes the module\n    // safe to import in an isomorphic code base.\n    return null\n  }\n\n  if (window.Razorpay) {\n    return window.Razorpay\n  }\n\n  const script =\n    document.querySelector(\n      `script[src=\"${CHECKOUT_URL}\"], script[src=\"${CHECKOUT_URL}/\"]`\n    ) || injectScript()\n\n  return new Promise((resolve, reject) => {\n    script.addEventListener('load', () => {\n      if (window.Razorpay) {\n        resolve(window.Razorpay)\n      } else {\n        reject(new Error('checkout.js not available'))\n      }\n    })\n\n    script.addEventListener('error', () => {\n      reject(new Error('Failed to load checkout.js'))\n    })\n  })\n})\n\nlet loadCalled = false\n\ncheckoutPromise.catch((err) => {\n  if (!loadCalled) console.warn(err)\n})\n\nexport const loadCheckout = (...args) => {\n  loadCalled = true\n\n  return checkoutPromise.then((maybeCheckout) =>\n    maybeCheckout ? maybeCheckout(...args) : null\n  )\n}\n"],"names":["const","CHECKOUT_URL","checkoutPromise","Promise","resolve","then","window","Razorpay","script","document","querySelector","createElement","src","headOrBody","head","body","Error","appendChild","injectScript","reject","addEventListener","loadCalled","catch","err","console","warn","maybeCheckout","args"],"mappings":"AAAAA,IAAMC,EAAe,+CAqBfC,EAAkBC,QAAQC,UAAUC,mBAClB,oBAAXC,cAGF,QAGLA,OAAOC,gBACFD,OAAOC,aAGVC,EACJC,SAASC,6BACQT,qBAA+BA,yBA/B5CO,EAASC,SAASE,cAAc,UACtCH,EAAOI,IAAMX,MAEPY,EAAaJ,SAASK,MAAQL,SAASM,SAExCF,QACG,IAAIG,MACR,wFAIJH,EAAWI,YAAYT,GAEhBA,EAmBAU,UAEA,IAAIf,iBAASC,EAASe,GAC3BX,EAAOY,iBAAiB,kBAClBd,OAAOC,SACTH,EAAQE,OAAOC,UAEfY,EAAO,IAAIH,MAAM,gCAIrBR,EAAOY,iBAAiB,mBACtBD,EAAO,IAAIH,MAAM,qCAKnBK,GAAa,EAEjBnB,EAAgBoB,eAAOC,GAChBF,GAAYG,QAAQC,KAAKF,mGAI9BF,GAAa,EAENnB,EAAgBG,cAAMqB,UAC3BA,EAAgBA,eAAiBC,GAAQ"}